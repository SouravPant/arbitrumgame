<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Test</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #1a1a1a;
            color: white;
            font-family: Arial, sans-serif;
        }
        #testCanvas {
            border: 2px solid #28A0F0;
            margin: 20px;
        }
        .controls {
            margin: 20px;
            padding: 20px;
            background: #333;
            border-radius: 8px;
        }
        button {
            margin: 5px;
            padding: 10px 20px;
            background: #28A0F0;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background: #1E6B8C;
        }
    </style>
</head>
<body>
    <h1>Arbitrum Runner - Game Test</h1>
    <div class="controls">
        <button onclick="game.moveLeft()">Move Left</button>
        <button onclick="game.moveRight()">Move Right</button>
        <button onclick="game.jump()">Jump</button>
        <button onclick="game.slide()">Slide</button>
        <button onclick="game.startGame()">Start Game</button>
        <button onclick="game.restartGame()">Restart</button>
    </div>
    <canvas id="testCanvas" width="800" height="600"></canvas>
    
    <script>
        // Simplified test version of the game
        class GameTest {
            constructor() {
                this.canvas = document.getElementById('testCanvas');
                this.ctx = this.canvas.getContext('2d');
                this.gameState = 'start';
                this.score = 0;
                
                // Player
                this.player = {
                    x: this.canvas.width / 2,
                    y: this.canvas.height - 100,
                    width: 60,
                    height: 80,
                    lane: 1,
                    isJumping: false,
                    isSliding: false,
                    jumpHeight: 0,
                    jumpVelocity: 0,
                    gravity: 0.8,
                    groundY: this.canvas.height - 100,
                    targetX: this.canvas.width / 2
                };
                
                // Lanes
                this.lanes = [
                    this.canvas.width * 0.25,
                    this.canvas.width * 0.5,
                    this.canvas.width * 0.75
                ];
                
                this.gameLoop();
            }
            
            moveLeft() {
                if (this.gameState === 'playing' && this.player.lane > 0) {
                    this.player.lane--;
                    this.player.targetX = this.lanes[this.player.lane];
                }
            }
            
            moveRight() {
                if (this.gameState === 'playing' && this.player.lane < 2) {
                    this.player.lane++;
                    this.player.targetX = this.lanes[this.player.lane];
                }
            }
            
            jump() {
                if (this.gameState === 'playing' && !this.player.isJumping && !this.player.isSliding) {
                    this.player.isJumping = true;
                    this.player.jumpVelocity = -15;
                }
            }
            
            slide() {
                if (this.gameState === 'playing' && !this.player.isJumping && !this.player.isSliding) {
                    this.player.isSliding = true;
                    setTimeout(() => {
                        this.player.isSliding = false;
                    }, 800);
                }
            }
            
            startGame() {
                this.gameState = 'playing';
                this.score = 0;
                this.player.lane = 1;
                this.player.x = this.lanes[this.player.lane];
                this.player.targetX = this.player.x;
                this.player.y = this.player.groundY;
                this.player.isJumping = false;
                this.player.isSliding = false;
                this.player.jumpHeight = 0;
                this.player.jumpVelocity = 0;
            }
            
            restartGame() {
                this.gameState = 'start';
                this.score = 0;
            }
            
            updatePlayer() {
                // Smooth lane transition
                const dx = this.player.targetX - this.player.x;
                if (Math.abs(dx) > 1) {
                    this.player.x += dx * 0.1;
                } else {
                    this.player.x = this.player.targetX;
                }
                
                // Update jumping physics
                if (this.player.isJumping) {
                    this.player.jumpVelocity += this.player.gravity;
                    this.player.jumpHeight = -this.player.jumpVelocity;
                    
                    if (this.player.jumpHeight <= 0) {
                        this.player.isJumping = false;
                        this.player.jumpHeight = 0;
                        this.player.jumpVelocity = 0;
                    }
                }
                
                // Update player position
                this.player.y = this.player.groundY - this.player.jumpHeight;
                
                // Update player height based on sliding
                if (this.player.isSliding) {
                    this.player.height = 40;
                } else {
                    this.player.height = 80;
                }
            }
            
            updateGame() {
                if (this.gameState === 'playing') {
                    this.updatePlayer();
                    this.score++;
                }
            }
            
            render() {
                // Clear canvas
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                
                // Draw background
                this.ctx.fillStyle = '#1E293B';
                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
                
                // Draw lanes
                this.ctx.strokeStyle = 'rgba(40, 160, 240, 0.3)';
                this.ctx.lineWidth = 2;
                this.ctx.setLineDash([20, 20]);
                for (const lane of this.lanes) {
                    this.ctx.beginPath();
                    this.ctx.moveTo(lane, 0);
                    this.ctx.lineTo(lane, this.canvas.height);
                    this.ctx.stroke();
                }
                this.ctx.setLineDash([]);
                
                // Draw ground
                this.ctx.strokeStyle = 'rgba(40, 160, 240, 0.5)';
                this.ctx.lineWidth = 3;
                this.ctx.beginPath();
                this.ctx.moveTo(0, this.player.groundY + this.player.height);
                this.ctx.lineTo(this.canvas.width, this.player.groundY + this.player.height);
                this.ctx.stroke();
                
                // Draw player
                this.ctx.fillStyle = '#28A0F0';
                this.ctx.fillRect(
                    this.player.x - this.player.width/2,
                    this.player.y,
                    this.player.width,
                    this.player.height
                );
                
                // Draw UI
                this.ctx.fillStyle = '#FFFFFF';
                this.ctx.font = '24px Arial';
                this.ctx.textAlign = 'left';
                this.ctx.fillText(`Game State: ${this.gameState}`, 20, 40);
                this.ctx.fillText(`Score: ${this.score}`, 20, 70);
                this.ctx.fillText(`Player Pos: (${Math.round(this.player.x)}, ${Math.round(this.player.y)})`, 20, 100);
                this.ctx.fillText(`Lane: ${this.player.lane}`, 20, 130);
                this.ctx.fillText(`Jumping: ${this.player.isJumping}`, 20, 160);
                this.ctx.fillText(`Sliding: ${this.player.isSliding}`, 20, 190);
            }
            
            gameLoop() {
                this.updateGame();
                this.render();
                requestAnimationFrame(() => this.gameLoop());
            }
        }
        
        // Initialize game when page loads
        let game;
        document.addEventListener('DOMContentLoaded', () => {
            game = new GameTest();
        });
    </script>
</body>
</html>